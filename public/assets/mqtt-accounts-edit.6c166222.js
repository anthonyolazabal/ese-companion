import{n,p as _,r as y,o as w,q as g,w as t,i as e,s as i,v as q,x,y as d,l as s,z as p,A as b,ay as C,B,C as f,m as h,f as v}from"./index.3b184585.js";import{t as m}from"./form.3ba9d24b.js";/* empty css              */import{V as T,a as k}from"./VBanner.e3a8123e.js";import{V as A}from"./VForm.20c01160.js";import{V}from"./VTextField.aab1089a.js";import{V as S}from"./VSelect.00d24c7c.js";import{V as U}from"./VSlider.c888f4f0.js";import"./VCheckboxBtn.a000f421.js";import"./VSelectionControl.d5f42bec.js";import"./VChip.46a960f4.js";const E={name:"EditMQTTAccounts",data(){return{algo:"SHA512",algos:["SHA512","PKCS5S2","MD5"],iterations:[10,100],item:{}}},methods:{async update(){this.item.username&&this.item.password?await this.$axios.put("/user/"+this.$route.query.id,this.item).then(r=>{m("Accounts successfully updated",{type:"success",position:"bottom-center"})}).then(()=>{this.item={},this.$route.query.return=="details"?n.push("/mqtt-accounts-details?id="+this.$route.query.id):n.push("/mqtt-accounts")}).catch(()=>{m("Error updating accounts, contact your admin ! ",{type:"warning",position:"bottom-center"})}):m("Please fill all fields !",{type:"warning",position:"bottom-center"})},cancel(){this.$route.query.return=="details"?n.push("/mqtt-accounts-details?id="+this.$route.query.id):n.push("/mqtt-accounts")}},async mounted(){await this.$axios.get("/user/"+this.$route.query.id).then(r=>{this.item=r.data,this.algo=this.item.algorithm?this.item.algorithm:""}).then(()=>{this.item.password=""}).catch(r=>{console.log(r)})}},I=v("div",{class:"text-caption"}," Password iterations ",-1);function M(r,a,P,H,o,c){const u=y("RouterLink");return w(),g(f,null,{default:t(()=>[e(i,{cols:"12",md:"12"},{default:t(()=>[e(q,null,{prepend:t(()=>[e(x,{size:"small",icon:"mdi-home"})]),default:t(()=>[e(d,null,{default:t(()=>[e(u,{to:"/"},{default:t(()=>[s("Home")]),_:1})]),_:1}),e(p,null,{default:t(()=>[s(" / ")]),_:1}),e(d,null,{default:t(()=>[e(u,{to:"/mqtt-accounts"},{default:t(()=>[s(" MQTT Account ")]),_:1})]),_:1}),e(p,null,{default:t(()=>[s(" / ")]),_:1}),e(d,null,{default:t(()=>[e(u,{to:"/mqtt-accounts-edit?id"+r.$route.query.id},{default:t(()=>[s(" Edit Account ")]),_:1},8,["to"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(b,{title:"Edit a MQTT accounts"},{default:t(()=>[e(C,null,{default:t(()=>[e(T,{lines:"two",icon:"$warning",color:"warning",class:"my-4 elevation-20"},{default:t(()=>[e(k,null,{default:t(()=>[s(" Be aware that password hash is not reversible, so by editing the user you need to input again the password for the user (device). ")]),_:1})]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(A,null,{default:t(()=>[e(f,{style:{"margin-top":"2px"}},{default:t(()=>[e(i,{cols:"12",md:"6"},{default:t(()=>[e(V,{modelValue:o.item.username,"onUpdate:modelValue":a[0]||(a[0]=l=>o.item.username=l),label:"Username",placeholder:"username"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"6"},{default:t(()=>[e(V,{modelValue:o.item.password,"onUpdate:modelValue":a[1]||(a[1]=l=>o.item.password=l),label:"Password",type:"password",onmouseleave:"",placeholder:"password"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"6"},{default:t(()=>[e(S,{modelValue:o.item.algorithm,"onUpdate:modelValue":a[2]||(a[2]=l=>o.item.algorithm=l),items:o.algos,variant:"outlined",placeholder:"algorithm"},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"12",md:"6"},{default:t(()=>[I,e(U,{modelValue:o.item.password_iterations,"onUpdate:modelValue":a[3]||(a[3]=l=>o.item.password_iterations=l),label:"Iterations",step:"10","thumb-label":"always",style:{"margin-right":"25px"}},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[e(h,{color:"primary",onClick:c.update},{default:t(()=>[s(" Update ")]),_:1},8,["onClick"]),e(h,{color:"secondary",variant:"tonal",onClick:c.cancel},{default:t(()=>[s(" Cancel ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const J=_(E,[["render",M]]);export{J as default};
