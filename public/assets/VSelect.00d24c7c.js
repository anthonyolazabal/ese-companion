import{J as b,M as N,aJ as O,P as F,a9 as L,aE as M,H as E,E as K,L as g,aK as R,g as k,F as j,i as s,a5 as A,aL as H,a6 as V,aM as J,aN as I,aH as U,l as z,G,ab as q}from"./index.3b184585.js";import{V as Q}from"./VCheckboxBtn.a000f421.js";import{V as W}from"./VChip.46a960f4.js";import{V as X}from"./VTextField.aab1089a.js";const Y=b({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:N,default:"$dropdown"},menuProps:{type:Object},modelValue:{type:null,default:()=>[]},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,readonly:Boolean,...O({itemChildren:!1})},"select"),te=F()({name:"VSelect",props:{...Y(),...L({transition:{component:M}})},emits:{"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,D){let{slots:a}=D;const{t:_}=E(),h=K(),u=g(e,"menu"),{items:v,transformIn:B,transformOut:P}=R(e),n=g(e,"modelValue",[],l=>B(q(l)),l=>{var i;const t=P(l);return e.multiple?t:(i=t[0])!=null?i:null}),f=k(()=>n.value.map(l=>v.value.find(t=>t.value===l.value)||l)),C=k(()=>f.value.map(l=>l.props.value));function x(l){n.value=[],e.openOnClear&&(u.value=!0)}function S(){e.hideNoData&&!v.value.length||e.readonly||(u.value=!u.value)}function T(l){e.readonly||(["Enter","ArrowDown"," "].includes(l.key)&&(u.value=!0),["Escape","Tab"].includes(l.key)&&(u.value=!1))}function m(l){if(e.multiple){const t=C.value.findIndex(i=>i===l.value);if(t===-1)n.value=[...n.value,l];else{const i=[...n.value];i.splice(t,1),n.value=i}}else n.value=[l],u.value=!1}return j(()=>{const l=!!(e.chips||a.chip);return s(X,{ref:h,modelValue:n.value.map(t=>t.props.value).join(", "),"onUpdate:modelValue":t=>{t==null&&(n.value=[])},validationValue:n.externalValue,dirty:n.value.length>0,class:["v-select",{"v-select--active-menu":u.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":n.value.length}],appendInnerIcon:e.menuIcon,readonly:!0,"onClick:clear":x,"onClick:control":S,onBlur:()=>u.value=!1,onKeydown:T},{...a,default:()=>{var t,i,y;return s(A,null,[s(H,V({modelValue:u.value,"onUpdate:modelValue":o=>u.value=o,activator:"parent",contentClass:"v-select__content",eager:e.eager,openOnClick:!1,closeOnContentClick:!1,transition:e.transition},e.menuProps),{default:()=>[s(J,{selected:C.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:o=>o.preventDefault()},{default:()=>{var o;return[!v.value.length&&!e.hideNoData&&((o=(t=a["no-data"])==null?void 0:t.call(a))!=null?o:s(I,{title:_(e.noDataText)},null)),(i=a["prepend-item"])==null?void 0:i.call(a),v.value.map((c,p)=>{var d;var r;return(d=(r=a.item)==null?void 0:r.call(a,{item:c,index:p,props:V(c.props,{onClick:()=>m(c)})}))!=null?d:s(I,V({key:p},c.props,{onClick:()=>m(c)}),{prepend:w=>{let{isSelected:$}=w;return e.multiple&&!e.hideSelected?s(Q,{modelValue:$,ripple:!1},null):void 0}})}),(y=a["append-item"])==null?void 0:y.call(a)]}})]}),f.value.map((o,c)=>{function p(d){d.stopPropagation(),d.preventDefault(),m(o)}const r={"onClick:close":p,modelValue:!0};return s("div",{key:c,class:"v-select__selection"},[l?s(U,{defaults:{VChip:{closable:e.closableChips,size:"small",text:o.title}}},{default:()=>[a.chip?a.chip({item:o,index:c,props:r}):s(W,r,null)]}):a.selection?a.selection({item:o,index:c}):s("span",{class:"v-select__selection-text"},[o.title,e.multiple&&c<f.value.length-1&&s("span",{class:"v-select__selection-comma"},[z(",")])])])})])}})}),G({menu:u,select:m},h)}});export{te as V};
